#!/bin/bash
set -e

# Activate the conda environment
#source /srv/conda/etc/profile.d/conda.sh
#conda activate notebook

# Print Python version
python --version

# Install required packages
#pip install -r requirements.txt

# Print package versions for debugging
pip list

# Check package versions
python -c "import numpy; print(numpy.__version__)"
python -c "import pandas; print(pandas.__version__)"
python -c "import matplotlib; print(matplotlib.__version__)"
python -c "import ipywidgets; print(ipywidgets.__version__)"

# Install and enable Voila
pip install voila
jupyter serverextension enable voila --sys-prefix

# Enable the notebook extension for interactive widgets
jupyter nbextension enable --py widgetsnbextension

# If you want to use Voila in JupyterLab
# jupyter labextension install @jupyter-voila/jupyterlab-preview

# Optionally, if you need specific Voila templates
# pip install voila-materialstream
# pip install voila-vuetify

# Clean up (optional, but can help reduce image size)
pip cache purge
rm -rf ~/.cache/yarn
